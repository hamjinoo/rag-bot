# 커밋 메시지 가이드

> 학습 프로젝트에서 단계별로 커밋할 때 히스토리를 쉽게 찾고 이해할 수 있는 커밋 메시지 작성 방법

---

## 📋 커밋 메시지 구조

### 기본 형식

```
<타입>(<스텝>): <주요 작업 내용>

<상세 설명> (선택)

- <작업 1>
- <작업 2>
```

---

## 🏷️ 커밋 타입 (Type)

### 주요 타입

| 타입       | 의미              | 사용 예시                          |
| ---------- | ----------------- | ---------------------------------- |
| `learn`    | 개념 학습 및 이해 | 학습 문서 작성, 개념 정리          |
| `feat`     | 기능 추가         | 새로운 API 엔드포인트, 새로운 기능 |
| `fix`      | 버그 수정         | 에러 해결, 예외 처리               |
| `refactor` | 리팩토링          | 코드 개선 (기능 변경 없음)         |
| `test`     | 테스트 추가/수정  | 단위 테스트, 통합 테스트           |
| `docs`     | 문서 수정         | README, 주석, 가이드 문서          |
| `style`    | 코드 포맷팅       | 들여쓰기, 세미콜론 등              |
| `chore`    | 기타 작업         | 빌드 설정, 의존성 추가             |

### 학습 프로젝트 전용 타입

| 타입       | 의미      | 사용 예시                  |
| ---------- | --------- | -------------------------- |
| `step`     | 단계 완료 | Step 1 완료, Step 2 완료   |
| `practice` | 실습 완료 | Postman 테스트 완료        |
| `study`    | 학습 노트 | IoC/DI 개념 정리, JPA 학습 |

---

## 📝 스텝 표기법

### 형식: `step-N` 또는 `step-N.m`

```
step-1  → Step 1 (스프링부트 기초)
step-2  → Step 2 (기본 게시판 API)
step-2.1 → Step 2의 첫 번째 작업
step-2.2 → Step 2의 두 번째 작업
```

---

## ✍️ 커밋 메시지 예시

### Step 1: 스프링부트 기초

#### 1-1. 프로젝트 생성

```
feat(step-1): 프로젝트 초기 설정

- Spring Initializr로 프로젝트 생성
- 의존성 추가: Spring Web, JPA, H2, Lombok
- application.properties 기본 설정
```

#### 1-2. 첫 API 만들기

```
feat(step-1): Hello World API 구현

- HelloController 생성
- GET /api/hello 엔드포인트 추가
- JSON 응답 반환 테스트 완료
```

#### 1-3. 개념 학습 정리

```
study(step-1): IoC와 DI 개념 학습

- IoC (Inversion of Control) 이해
- 의존성 주입 3가지 방식 정리
- 스프링 컨테이너 동작 원리 학습
```

---

### Step 2: 기본 게시판 API

#### 2-1. Entity 설계

```
feat(step-2): Post Entity 생성

- Post 엔티티 필드 정의 (id, title, content)
- Board와의 연관관계 매핑 (@ManyToOne)
- JPA 어노테이션 적용
```

#### 2-2. Repository 생성

```
feat(step-2): PostRepository 인터페이스 생성

- JpaRepository 상속
- 기본 CRUD 메서드 자동 제공 확인
- 커스텀 메서드 추가 (findByBoardId)
```

#### 2-3. Service 레이어 구현

```
feat(step-2): PostService 비즈니스 로직 구현

- findAll(), findById(), save(), update(), delete() 메서드 구현
- @Transactional 어노테이션 적용
- 예외 처리 추가 (EntityNotFoundException)
```

#### 2-4. Controller 레이어 구현

```
feat(step-2): PostController REST API 구현

- CRUD 엔드포인트 5개 구현
- @RestController, @RequestMapping 적용
- @PathVariable, @RequestBody 사용
```

#### 2-5. 테스트 완료

```
practice(step-2): Postman으로 CRUD API 테스트 완료

- POST /api/posts - 게시글 생성 ✅
- GET /api/posts - 목록 조회 ✅
- GET /api/posts/{id} - 상세 조회 ✅
- PUT /api/posts/{id} - 수정 ✅
- DELETE /api/posts/{id} - 삭제 ✅
```

---

### Step 3: 게시판 기능 확장

#### 3-1. 댓글 기능 추가

```
feat(step-3): Reply Entity 및 CRUD 구현

- Reply 엔티티 생성 (Post와 N:1 관계)
- ReplyRepository, ReplyService, ReplyController 구현
- /api/posts/{postId}/replies 엔드포인트 추가
```

#### 3-2. 페이징 구현

```
feat(step-3): 게시글 목록 페이징 기능 추가

- Pageable 인터페이스 활용
- PageRequest로 페이징 파라미터 처리
- 정렬 기능 추가 (createdAt DESC)
```

#### 3-3. 검색 기능 추가

```
feat(step-3): 게시글 검색 기능 구현

- JPA Query Methods 활용 (findByTitleContaining)
- 제목/내용 통합 검색 구현
- GET /api/posts/search 엔드포인트 추가
```

#### 3-4. DTO 패턴 적용

```
refactor(step-3): DTO 패턴 적용으로 Entity 직접 노출 방지

- PostDTO 클래스 생성
- Entity → DTO 변환 로직 추가
- 순환 참조 문제 해결
```

---

### Step 4: 인증 및 권한 관리

#### 4-1. User Entity 생성

```
feat(step-4): User 엔티티 및 Role enum 추가

- User 엔티티 필드: email, password, name, role
- Role enum: ROLE_USER, ROLE_ADMIN
- Post와의 연관관계 추가 (author)
```

#### 4-2. Spring Security 설정

```
feat(step-4): Spring Security 기본 설정

- SecurityConfig 클래스 생성
- PasswordEncoder Bean 등록 (BCrypt)
- 인증/인가 경로 설정
```

#### 4-3. JWT 구현

```
feat(step-4): JWT 토큰 생성 및 검증 구현

- JwtTokenProvider 클래스 생성
- 토큰 생성/검증/파싱 메서드 구현
- application.properties에 JWT 설정 추가
```

#### 4-4. 로그인/회원가입 API

```
feat(step-4): 인증 API 구현

- POST /api/auth/register - 회원가입
- POST /api/auth/login - 로그인 (JWT 발급)
- AuthService 비즈니스 로직 구현
```

---

### Step 5: 마이크로서비스 전환

#### 5-1. Eureka Server 생성

```
feat(step-5): Eureka Server 프로젝트 생성

- eureka-server 모듈 추가
- @EnableEurekaServer 적용
- application.yml 설정 완료
```

#### 5-2. 서비스 분리

```
refactor(step-5): 모놀리식 → 마이크로서비스 분리

- user-service 모듈 분리
- post-service 모듈 분리
- 각 서비스별 독립 프로젝트 생성
```

#### 5-3. Service Discovery 구현

```
feat(step-5): Eureka Client 등록 완료

- User Service → Eureka 등록 ✅
- Post Service → Eureka 등록 ✅
- 서비스 간 통신 테스트 완료
```

---

## 🎯 커밋 메시지 베스트 프랙티스

### ✅ 좋은 예시

```
feat(step-2.3): PostService에 트랜잭션 관리 추가

- @Transactional(readOnly = true) 클래스 레벨 적용
- 쓰기 작업에만 @Transactional 명시
- 트랜잭션 범위 명확화

practice(step-2): Postman으로 전체 CRUD 테스트 완료

- 게시글 생성/조회/수정/삭제 모두 성공 ✅
- H2 콘솔에서 데이터 확인 완료
- 예외 처리 테스트 (존재하지 않는 ID 조회)

study(step-3): N+1 문제 개념 학습 및 해결 방법 정리

- N+1 문제 발생 원인 이해
- Fetch Join, EntityGraph, BatchSize 비교
- 각 방법의 장단점 정리
```

### ❌ 나쁜 예시

```
# 너무 간단함
fix: 버그 수정

# 무엇을 했는지 알 수 없음
feat: 기능 추가

# 스텝 정보 없음
feat: PostService 구현

# 의미 불명확
update: 코드 변경
```

---

## 📊 커밋 히스토리 예시

### 깔끔한 히스토리 구조

```
* feat(step-3.4): DTO 패턴 적용으로 Entity 직접 노출 방지
* practice(step-3.3): 검색 기능 Postman 테스트 완료
* feat(step-3.3): 게시글 검색 기능 구현
* practice(step-3.2): 페이징 기능 테스트 완료
* feat(step-3.2): 게시글 목록 페이징 기능 추가
* feat(step-3.1): Reply Entity 및 CRUD 구현
* step(step-3): Step 3 완료 - 게시판 기능 확장
* practice(step-2): Postman으로 CRUD API 테스트 완료
* feat(step-2.4): PostController REST API 구현
* feat(step-2.3): PostService 비즈니스 로직 구현
* feat(step-2.2): PostRepository 인터페이스 생성
* feat(step-2.1): Post Entity 생성
* step(step-2): Step 2 완료 - 기본 게시판 API 개발
* study(step-1): IoC와 DI 개념 학습 정리
* feat(step-1.2): Hello World API 구현
* feat(step-1.1): 프로젝트 초기 설정
```

---

## 🔍 커밋 히스토리 활용 팁

### 1. 특정 스텝 찾기

```bash
# Step 2 관련 커밋만 보기
git log --grep="step-2"

# Step 3의 모든 작업 보기
git log --grep="step-3"
```

### 2. 학습 내용 찾기

```bash
# "학습" 관련 커밋 찾기
git log --grep="study"

# "실습" 관련 커밋 찾기
git log --grep="practice"
```

### 3. 특정 기능 찾기

```bash
# "페이징" 관련 커밋 찾기
git log --grep="페이징"

# "JWT" 관련 커밋 찾기
git log --grep="JWT"
```

### 4. 타임라인 확인

```bash
# 시각적 로그 확인
git log --oneline --graph --all

# 날짜별로 보기
git log --date=short --pretty=format:"%h %ad %s" --date=short
```

---

## 📝 커밋 메시지 템플릿

### 기능 구현 시

```
feat(step-N.m): <기능 이름> 구현

- <구현 내용 1>
- <구현 내용 2>
- <구현 내용 3>
```

### 개념 학습 시

```
study(step-N): <개념 이름> 학습 정리

- <핵심 내용 1>
- <핵심 내용 2>
- <이해한 점>
```

### 실습/테스트 완료 시

```
practice(step-N): <실습 내용> 완료

- <테스트 항목 1> ✅
- <테스트 항목 2> ✅
- <확인 사항>
```

### 단계 완료 시

```
step(step-N): Step N 완료 - <단계 이름>

- <완료한 주요 기능>
- <배운 개념>
- <다음 단계 예고>
```

---

## 💡 추가 팁

### 1. 브랜치 전략

```
main                    # 안정적인 코드
├── step-1              # Step 1 작업
├── step-2              # Step 2 작업
└── step-3              # Step 3 작업
```

### 2. 태그 활용

```bash
# Step 완료 시 태그 달기
git tag step-1-complete
git tag step-2-complete

# 태그 목록 보기
git tag

# 특정 태그로 이동
git checkout step-1-complete
```

### 3. 이슈 연동

```
feat(step-2): PostService 구현 (#12)

# GitHub Issue #12와 연동
```

---

## 🎯 요약

### 커밋 메시지 작성 원칙

1. **명확한 타입**: `feat`, `study`, `practice` 등
2. **스텝 표기**: `step-N` 또는 `step-N.m`
3. **구체적인 내용**: 무엇을 했는지 명확히
4. **목록 형식**: 여러 작업 시 `-`로 나열

### 예시 한 줄 요약

```
✅ 좋음: feat(step-2.3): PostService에 트랜잭션 관리 추가
❌ 나쁨: update: 서비스 수정
```

이렇게 커밋하면 나중에 히스토리를 보면서 학습 과정을 쉽게 복기할 수 있습니다! 🚀
